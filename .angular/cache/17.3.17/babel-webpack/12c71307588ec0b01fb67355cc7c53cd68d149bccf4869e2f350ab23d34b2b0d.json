{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet SignupComponent = class SignupComponent {\n  constructor(apiService, router) {\n    this.apiService = apiService;\n    this.router = router;\n    this.currentStep = 'signup';\n    this.signupForm = {\n      fullName: '',\n      email: '',\n      phone: ''\n    };\n    this.verificationCode = '';\n    this.isLoading = false;\n    this.errorMessage = '';\n    this.successMessage = '';\n    this.countdown = 0;\n  }\n  onSignup() {\n    this.errorMessage = '';\n    this.successMessage = '';\n    this.isLoading = true;\n    // Validate form\n    if (!this.signupForm.fullName || !this.signupForm.email) {\n      this.errorMessage = 'Please fill in all required fields';\n      this.isLoading = false;\n      return;\n    }\n    this.apiService.signup(this.signupForm.email, this.signupForm.fullName, this.signupForm.phone || undefined).subscribe({\n      next: response => {\n        this.isLoading = false;\n        if (response.success) {\n          this.successMessage = 'Verification code sent to your email';\n          this.currentStep = 'verify';\n          this.startCountdown();\n        } else {\n          this.errorMessage = response.error || 'Failed to create account';\n        }\n      },\n      error: error => {\n        this.isLoading = false;\n        this.errorMessage = this.apiService.getErrorMessage(error);\n      }\n    });\n  }\n  onVerifyEmail() {\n    if (this.verificationCode.length !== 6) {\n      this.errorMessage = 'Please enter a 6-digit verification code';\n      return;\n    }\n    this.errorMessage = '';\n    this.successMessage = '';\n    this.isLoading = true;\n    this.apiService.verifyEmail(this.signupForm.email, this.verificationCode).subscribe({\n      next: response => {\n        this.isLoading = false;\n        if (response.success) {\n          this.currentStep = 'success';\n          this.clearCountdown();\n        } else {\n          this.errorMessage = response.error || 'Verification failed';\n        }\n      },\n      error: error => {\n        this.isLoading = false;\n        this.errorMessage = this.apiService.getErrorMessage(error);\n      }\n    });\n  }\n  resendVerificationCode() {\n    if (this.countdown > 0) return;\n    this.isLoading = true;\n    this.apiService.resendVerificationCode(this.signupForm.email).subscribe({\n      next: response => {\n        this.isLoading = false;\n        if (response.success) {\n          this.successMessage = 'New verification code sent';\n          this.startCountdown();\n        } else {\n          this.errorMessage = response.error || 'Failed to resend verification code';\n        }\n      },\n      error: error => {\n        this.isLoading = false;\n        this.errorMessage = this.apiService.getErrorMessage(error);\n      }\n    });\n  }\n  startCountdown() {\n    this.countdown = 60;\n    this.countdownTimer = setInterval(() => {\n      this.countdown--;\n      if (this.countdown <= 0) {\n        this.clearCountdown();\n      }\n    }, 1000);\n  }\n  clearCountdown() {\n    if (this.countdownTimer) {\n      clearInterval(this.countdownTimer);\n      this.countdownTimer = undefined;\n    }\n    this.countdown = 0;\n  }\n  goToLogin() {\n    this.router.navigate(['/login']);\n  }\n  ngOnDestroy() {\n    this.clearCountdown();\n  }\n};\nSignupComponent = __decorate([Component({\n  selector: 'app-signup',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  template: `\n    <div class=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n      <div class=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        <h2 class=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n          Create your account\n        </h2>\n        <p class=\"mt-2 text-center text-sm text-gray-600\">\n          Sign up with your email to start creating funeral announcements\n        </p>\n      </div>\n\n      <div class=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\n        <div class=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n          <!-- Step 1: Signup Form -->\n          <form *ngIf=\"currentStep === 'signup'\" (ngSubmit)=\"onSignup()\" class=\"space-y-6\">\n            <div>\n              <label for=\"fullName\" class=\"block text-sm font-medium text-gray-700\">\n                Full Name *\n              </label>\n              <div class=\"mt-1\">\n                <input\n                  id=\"fullName\"\n                  name=\"fullName\"\n                  type=\"text\"\n                  required\n                  [(ngModel)]=\"signupForm.fullName\"\n                  class=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"Enter your full name\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label for=\"email\" class=\"block text-sm font-medium text-gray-700\">\n                Email Address *\n              </label>\n              <div class=\"mt-1\">\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  required\n                  [(ngModel)]=\"signupForm.email\"\n                  class=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"Enter your email address\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label for=\"phone\" class=\"block text-sm font-medium text-gray-700\">\n                Phone Number\n              </label>\n              <div class=\"mt-1\">\n                <input\n                  id=\"phone\"\n                  name=\"phone\"\n                  type=\"tel\"\n                  [(ngModel)]=\"signupForm.phone\"\n                  class=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"Enter your phone number (optional)\"\n                />\n              </div>\n            </div>\n\n            <div *ngIf=\"errorMessage\" class=\"text-red-600 text-sm\">\n              {{ errorMessage }}\n            </div>\n\n            <div *ngIf=\"successMessage\" class=\"text-green-600 text-sm\">\n              {{ successMessage }}\n            </div>\n\n            <div>\n              <button\n                type=\"submit\"\n                [disabled]=\"isLoading\"\n                class=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\n              >\n                <span *ngIf=\"!isLoading\">Sign Up</span>\n                <span *ngIf=\"isLoading\" class=\"flex items-center\">\n                  <svg class=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                    <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                  </svg>\n                  Processing...\n                </span>\n              </button>\n            </div>\n          </form>\n\n          <!-- Step 2: Email Verification -->\n          <form *ngIf=\"currentStep === 'verify'\" (ngSubmit)=\"onVerifyEmail()\" class=\"space-y-6\">\n            <div>\n              <h3 class=\"text-lg font-medium text-gray-900\">Verify Your Email</h3>\n              <p class=\"mt-2 text-sm text-gray-600\">\n                We've sent a 6-digit verification code to {{ signupForm.email }}\n              </p>\n            </div>\n\n            <div>\n              <label for=\"verificationCode\" class=\"block text-sm font-medium text-gray-700\">\n                Verification Code *\n              </label>\n              <div class=\"mt-1\">\n                <input\n                  id=\"verificationCode\"\n                  name=\"verificationCode\"\n                  type=\"text\"\n                  maxlength=\"6\"\n                  required\n                  [(ngModel)]=\"verificationCode\"\n                  class=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-center text-2xl tracking-widest\"\n                  placeholder=\"000000\"\n                />\n              </div>\n            </div>\n\n            <div *ngIf=\"errorMessage\" class=\"text-red-600 text-sm\">\n              {{ errorMessage }}\n            </div>\n\n            <div *ngIf=\"successMessage\" class=\"text-green-600 text-sm\">\n              {{ successMessage }}\n            </div>\n\n            <div class=\"space-y-3\">\n              <button\n                type=\"submit\"\n                [disabled]=\"isLoading || verificationCode.length !== 6\"\n                class=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\n              >\n                <span *ngIf=\"!isLoading\">Verify Email</span>\n                <span *ngIf=\"isLoading\" class=\"flex items-center\">\n                  <svg class=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                    <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                  </svg>\n                  Verifying...\n                </span>\n              </button>\n\n              <button\n                type=\"button\"\n                (click)=\"resendVerificationCode()\"\n                [disabled]=\"isLoading || countdown > 0\"\n                class=\"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\n              >\n                <span *ngIf=\"countdown > 0\">Resend in {{ countdown }}s</span>\n                <span *ngIf=\"countdown === 0\">Resend Code</span>\n              </button>\n            </div>\n          </form>\n\n          <!-- Success Message -->\n          <div *ngIf=\"currentStep === 'success'\" class=\"text-center\">\n            <div class=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100\">\n              <svg class=\"h-6 w-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"></path>\n              </svg>\n            </div>\n            <h3 class=\"mt-2 text-sm font-medium text-gray-900\">Account created successfully!</h3>\n            <p class=\"mt-1 text-sm text-gray-500\">\n              Your account has been verified. You can now log in to create funeral announcements.\n            </p>\n            <div class=\"mt-6\">\n              <button\n                (click)=\"goToLogin()\"\n                class=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              >\n                Go to Login\n              </button>\n            </div>\n          </div>\n\n          <!-- Navigation Links -->\n          <div class=\"mt-6\" *ngIf=\"currentStep === 'signup'\">\n            <div class=\"relative\">\n              <div class=\"absolute inset-0 flex items-center\">\n                <div class=\"w-full border-t border-gray-300\" />\n              </div>\n              <div class=\"relative flex justify-center text-sm\">\n                <span class=\"px-2 bg-white text-gray-500\">Already have an account?</span>\n              </div>\n            </div>\n\n            <div class=\"mt-6\">\n              <button\n                (click)=\"goToLogin()\"\n                class=\"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              >\n                Log In\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `\n})], SignupComponent);\nexport { SignupComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}