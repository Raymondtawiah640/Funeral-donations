{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction DonateComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 7);\n    i0.ɵɵelement(2, \"circle\", 8)(3, \"path\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"p\", 10);\n    i0.ɵɵtext(5, \"Loading announcement details...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DonateComponent_div_3_img_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 20);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"src\", ctx_r0.getThumbnailImage(ctx_r0.announcement), i0.ɵɵsanitizeUrl)(\"alt\", ctx_r0.announcement.deceased_name);\n  }\n}\nfunction DonateComponent_div_3_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"Goal: \", ctx_r0.formatCurrency(ctx_r0.announcement.goal_amount), \"\");\n  }\n}\nfunction DonateComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"div\", 13);\n    i0.ɵɵtemplate(3, DonateComponent_div_3_img_3_Template, 1, 2, \"img\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 15)(5, \"h2\", 16);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 17);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 18);\n    i0.ɵɵtemplate(10, DonateComponent_div_3_span_10_Template, 2, 1, \"span\", 19);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.getThumbnailImage(ctx_r0.announcement));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.announcement.deceased_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.getMessagePreview());\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.announcement.goal_amount);\n  }\n}\nfunction DonateComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"h2\", 22);\n    i0.ɵɵtext(2, \" Make a Donation \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 23);\n    i0.ɵɵtext(4, \" Your contribution helps provide support to families during their most difficult times. \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DonateComponent_div_5_div_1_div_19_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 46);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.copiedMessage);\n  }\n}\nfunction DonateComponent_div_5_div_1_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 39)(1, \"label\", 32);\n    i0.ɵɵtext(2, \"Bank Account Number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 40)(4, \"p\", 41);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 42);\n    i0.ɵɵlistener(\"click\", function DonateComponent_div_5_div_1_div_19_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.copyToClipboard(ctx_r0.announcement.beneficiary_bank_account || \"\"));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(7, \"svg\", 43);\n    i0.ɵɵelement(8, \"path\", 44);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(9, DonateComponent_div_5_div_1_div_19_span_9_Template, 2, 1, \"span\", 45);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.announcement.beneficiary_bank_account);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.copiedMessage);\n  }\n}\nfunction DonateComponent_div_5_div_1_div_20_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 46);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.copiedMessage);\n  }\n}\nfunction DonateComponent_div_5_div_1_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 39)(1, \"label\", 32);\n    i0.ɵɵtext(2, \"Mobile Money Number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 40)(4, \"p\", 41);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 42);\n    i0.ɵɵlistener(\"click\", function DonateComponent_div_5_div_1_div_20_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.copyToClipboard(ctx_r0.announcement.beneficiary_mobile_money || \"\"));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(7, \"svg\", 43);\n    i0.ɵɵelement(8, \"path\", 44);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(9, DonateComponent_div_5_div_1_div_20_span_9_Template, 2, 1, \"span\", 45);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.announcement.beneficiary_mobile_money);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.copiedMessage);\n  }\n}\nfunction DonateComponent_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"h3\", 27);\n    i0.ɵɵtext(2, \"How to Donate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 28);\n    i0.ɵɵtext(4, \" Please send your donation directly to the beneficiary's account using the details below. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 29)(6, \"h4\", 30);\n    i0.ɵɵtext(7, \"Payment Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 31)(9, \"div\")(10, \"label\", 32);\n    i0.ɵɵtext(11, \"Beneficiary\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\", 33);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\")(15, \"label\", 32);\n    i0.ɵɵtext(16, \"Account Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"p\", 34);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(19, DonateComponent_div_5_div_1_div_19_Template, 10, 2, \"div\", 35)(20, DonateComponent_div_5_div_1_div_20_Template, 10, 2, \"div\", 35);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"div\", 36)(22, \"h4\", 37);\n    i0.ɵɵtext(23, \"Thank You\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"p\", 38);\n    i0.ɵɵtext(25, \" After making your donation, the family will be notified and the donation amount will be updated on this page. Please keep your transaction receipt for your records. \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(13);\n    i0.ɵɵtextInterpolate(ctx_r0.announcement.beneficiary_name);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.announcement.beneficiary_account_type === \"bank\" ? \"Bank Account\" : \"Mobile Money\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.announcement.beneficiary_account_type === \"bank\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.announcement.beneficiary_account_type === \"mobile_money\");\n  }\n}\nfunction DonateComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtemplate(1, DonateComponent_div_5_div_1_Template, 26, 4, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.announcement);\n  }\n}\nexport let DonateComponent = /*#__PURE__*/(() => {\n  class DonateComponent {\n    constructor(apiService, route) {\n      this.apiService = apiService;\n      this.route = route;\n      this.title = 'Donate - Legacy Donation';\n      this.announcement = null;\n      this.announcementId = null;\n      this.isLoading = true;\n      this.copiedMessage = '';\n    }\n    ngOnInit() {\n      this.announcementId = parseInt(this.route.snapshot.paramMap.get('announcementId') || '0');\n      if (this.announcementId > 0) {\n        this.loadAnnouncement(this.announcementId);\n      } else {\n        this.isLoading = false;\n        console.error('Invalid announcement ID');\n      }\n    }\n    loadAnnouncement(id) {\n      this.apiService.getAnnouncement(id).subscribe({\n        next: response => {\n          this.isLoading = false;\n          if (response.success) {\n            this.announcement = response.data;\n            if (this.announcement.status !== 'active' && this.announcement.status !== 'grace_period') {\n              console.error('This announcement is no longer accepting donations.');\n            }\n          } else {\n            console.error(response.error || 'Failed to load announcement details');\n          }\n        },\n        error: error => {\n          this.isLoading = false;\n          console.error(this.apiService.getErrorMessage(error));\n        }\n      });\n    }\n    getThumbnailImage(announcement) {\n      const deceasedPhoto = announcement.files?.find(file => file.upload_purpose === 'deceased_photo');\n      if (deceasedPhoto && deceasedPhoto.file_type === 'image') {\n        return `https://kilnenterprise.com/Donations/${deceasedPhoto.file_path}`;\n      }\n      return null;\n    }\n    formatCurrency(amount) {\n      const numAmount = typeof amount === 'string' ? parseFloat(amount) : amount || 0;\n      return `GH₵${numAmount.toFixed(2)}`;\n    }\n    getMessagePreview() {\n      const message = this.announcement?.family_message || '';\n      return message.length > 100 ? message.substring(0, 100) + '...' : message;\n    }\n    copyToClipboard(text) {\n      if (navigator.clipboard) {\n        navigator.clipboard.writeText(text).then(() => {\n          this.copiedMessage = 'Copied!';\n          setTimeout(() => {\n            this.copiedMessage = '';\n          }, 2000);\n        });\n      }\n    }\n    static {\n      this.ɵfac = function DonateComponent_Factory(t) {\n        return new (t || DonateComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: DonateComponent,\n        selectors: [[\"app-donate\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 6,\n        vars: 4,\n        consts: [[1, \"py-20\"], [1, \"max-w-3xl\", \"mx-auto\", \"px-4\", \"sm:px-6\", \"lg:px-8\"], [\"class\", \"text-center py-12\", 4, \"ngIf\"], [\"class\", \"mb-8 bg-white rounded-lg shadow-md p-6\", 4, \"ngIf\"], [\"class\", \"text-center\", 4, \"ngIf\"], [\"class\", \"mt-12 bg-white shadow-lg rounded-lg p-8\", 4, \"ngIf\"], [1, \"text-center\", \"py-12\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", 1, \"animate-spin\", \"h-12\", \"w-12\", \"text-blue-600\", \"mx-auto\"], [\"cx\", \"12\", \"cy\", \"12\", \"r\", \"10\", \"stroke\", \"currentColor\", \"stroke-width\", \"4\", 1, \"opacity-25\"], [\"fill\", \"currentColor\", \"d\", \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\", 1, \"opacity-75\"], [1, \"mt-4\", \"text-gray-600\"], [1, \"mb-8\", \"bg-white\", \"rounded-lg\", \"shadow-md\", \"p-6\"], [1, \"flex\", \"items-center\", \"space-x-4\"], [1, \"flex-shrink-0\"], [\"class\", \"h-16 w-16 object-cover rounded-lg shadow-md\", 3, \"src\", \"alt\", 4, \"ngIf\"], [1, \"flex-1\"], [1, \"text-2xl\", \"font-bold\", \"text-gray-900\"], [1, \"text-gray-600\"], [1, \"mt-2\", \"flex\", \"items-center\", \"space-x-4\", \"text-sm\", \"text-gray-500\"], [4, \"ngIf\"], [1, \"h-16\", \"w-16\", \"object-cover\", \"rounded-lg\", \"shadow-md\", 3, \"src\", \"alt\"], [1, \"text-center\"], [1, \"text-3xl\", \"font-extrabold\", \"text-gray-900\", \"sm:text-4xl\"], [1, \"mt-4\", \"text-lg\", \"text-gray-500\"], [1, \"mt-12\", \"bg-white\", \"shadow-lg\", \"rounded-lg\", \"p-8\"], [\"class\", \"mb-8\", 4, \"ngIf\"], [1, \"mb-8\"], [1, \"text-lg\", \"font-medium\", \"text-gray-900\", \"mb-6\"], [1, \"text-gray-600\", \"mb-6\"], [1, \"bg-gray-50\", \"rounded-lg\", \"p-6\", \"mb-6\"], [1, \"text-md\", \"font-medium\", \"text-gray-900\", \"mb-4\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-2\", \"gap-4\"], [1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-500\"], [1, \"mt-1\", \"text-sm\", \"text-gray-900\", \"font-medium\"], [1, \"mt-1\", \"text-sm\", \"text-gray-900\"], [\"class\", \"md:col-span-2\", 4, \"ngIf\"], [1, \"bg-green-50\", \"border\", \"border-green-200\", \"rounded-lg\", \"p-6\"], [1, \"text-md\", \"font-medium\", \"text-green-900\", \"mb-2\"], [1, \"text-sm\", \"text-green-700\"], [1, \"md:col-span-2\"], [1, \"flex\", \"items-center\", \"mt-1\"], [1, \"text-sm\", \"text-gray-900\", \"font-mono\", \"text-lg\"], [\"type\", \"button\", 1, \"ml-3\", \"text-blue-600\", \"hover:text-blue-800\", 3, \"click\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"h-5\", \"w-5\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"], [\"class\", \"ml-2 text-sm text-green-600\", 4, \"ngIf\"], [1, \"ml-2\", \"text-sm\", \"text-green-600\"]],\n        template: function DonateComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n            i0.ɵɵtemplate(2, DonateComponent_div_2_Template, 6, 0, \"div\", 2)(3, DonateComponent_div_3_Template, 11, 4, \"div\", 3)(4, DonateComponent_div_4_Template, 5, 0, \"div\", 4)(5, DonateComponent_div_5_Template, 2, 1, \"div\", 5);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.announcement && !ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n          }\n        },\n        dependencies: [CommonModule, i3.NgIf, FormsModule],\n        encapsulation: 2\n      });\n    }\n  }\n  return DonateComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}