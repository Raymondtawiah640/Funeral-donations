{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginComponent_form_8_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.errorMessage, \" \");\n  }\n}\nfunction LoginComponent_form_8_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.successMessage, \" \");\n  }\n}\nfunction LoginComponent_form_8_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Request Login Code\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_8_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 26);\n    i0.ɵɵelement(2, \"circle\", 27)(3, \"path\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" Sending... \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 14);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_form_8_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onRequestLoginCode());\n    });\n    i0.ɵɵelementStart(1, \"div\")(2, \"label\", 15);\n    i0.ɵɵtext(3, \" Email Address * \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 16)(5, \"input\", 17);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_form_8_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.loginForm.email, $event) || (ctx_r1.loginForm.email = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(6, LoginComponent_form_8_div_6_Template, 2, 1, \"div\", 18)(7, LoginComponent_form_8_div_7_Template, 2, 1, \"div\", 19);\n    i0.ɵɵelementStart(8, \"div\")(9, \"button\", 20);\n    i0.ɵɵtemplate(10, LoginComponent_form_8_span_10_Template, 2, 0, \"span\", 21)(11, LoginComponent_form_8_span_11_Template, 5, 0, \"span\", 22);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.loginForm.email);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.errorMessage);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.successMessage);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.isLoading || !ctx_r1.loginForm.email);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.isLoading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isLoading);\n  }\n}\nfunction LoginComponent_form_9_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.errorMessage, \" \");\n  }\n}\nfunction LoginComponent_form_9_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.successMessage, \" \");\n  }\n}\nfunction LoginComponent_form_9_span_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Sign In\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_9_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 26);\n    i0.ɵɵelement(2, \"circle\", 27)(3, \"path\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" Signing in... \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_9_span_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"Send new code in \", ctx_r1.countdown, \"s\");\n  }\n}\nfunction LoginComponent_form_9_span_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Send New Code\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 14);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_form_9_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onLogin());\n    });\n    i0.ɵɵelementStart(1, \"div\")(2, \"h3\", 29);\n    i0.ɵɵtext(3, \"Enter Login Code\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 30);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\")(7, \"label\", 31);\n    i0.ɵɵtext(8, \" Login Code * \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 16)(10, \"input\", 32);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_form_9_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.loginCode, $event) || (ctx_r1.loginCode = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(11, LoginComponent_form_9_div_11_Template, 2, 1, \"div\", 18)(12, LoginComponent_form_9_div_12_Template, 2, 1, \"div\", 19);\n    i0.ɵɵelementStart(13, \"div\", 33)(14, \"button\", 20);\n    i0.ɵɵtemplate(15, LoginComponent_form_9_span_15_Template, 2, 0, \"span\", 21)(16, LoginComponent_form_9_span_16_Template, 5, 0, \"span\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function LoginComponent_form_9_Template_button_click_17_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onRequestLoginCode());\n    });\n    i0.ɵɵtemplate(18, LoginComponent_form_9_span_18_Template, 2, 1, \"span\", 21)(19, LoginComponent_form_9_span_19_Template, 2, 0, \"span\", 21);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" We've sent a 6-digit login code to \", ctx_r1.loginForm.email, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.loginCode);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.errorMessage);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.successMessage);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.isLoading || ctx_r1.loginCode.length !== 6);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.isLoading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isLoading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", ctx_r1.isLoading || ctx_r1.countdown > 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.countdown > 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.countdown === 0);\n  }\n}\nexport class LoginComponent {\n  constructor(apiService, router) {\n    this.apiService = apiService;\n    this.router = router;\n    this.currentStep = 'email';\n    this.loginForm = {\n      email: ''\n    };\n    this.loginCode = '';\n    this.isLoading = false;\n    this.errorMessage = '';\n    this.successMessage = '';\n    this.countdown = 0;\n  }\n  onRequestLoginCode() {\n    this.errorMessage = '';\n    this.successMessage = '';\n    this.isLoading = true;\n    if (!this.loginForm.email) {\n      this.errorMessage = 'Please enter your email address';\n      this.isLoading = false;\n      return;\n    }\n    this.apiService.requestLoginCode(this.loginForm.email).subscribe({\n      next: response => {\n        this.isLoading = false;\n        if (response.success) {\n          this.successMessage = 'Login code sent to your email';\n          this.currentStep = 'code';\n          this.startCountdown();\n        } else {\n          this.errorMessage = response.error || 'Failed to send login code';\n        }\n      },\n      error: error => {\n        this.isLoading = false;\n        this.errorMessage = this.apiService.getErrorMessage(error);\n      }\n    });\n  }\n  onLogin() {\n    if (this.loginCode.length !== 6) {\n      this.errorMessage = 'Please enter a 6-digit login code';\n      return;\n    }\n    this.errorMessage = '';\n    this.successMessage = '';\n    this.isLoading = true;\n    this.apiService.loginWithCode(this.loginForm.email, this.loginCode).subscribe({\n      next: response => {\n        this.isLoading = false;\n        if (response.success) {\n          // Set user and token\n          this.apiService.setCurrentUser(response.data.user);\n          this.apiService.setAuthToken(response.data.session_token);\n          // Clear countdown\n          this.clearCountdown();\n          // Navigate to dashboard or announcements\n          this.router.navigate(['/announcements']);\n        } else {\n          this.errorMessage = response.error || 'Login failed';\n        }\n      },\n      error: error => {\n        this.isLoading = false;\n        this.errorMessage = this.apiService.getErrorMessage(error);\n      }\n    });\n  }\n  startCountdown() {\n    this.countdown = 60;\n    this.countdownTimer = setInterval(() => {\n      this.countdown--;\n      if (this.countdown <= 0) {\n        this.clearCountdown();\n      }\n    }, 1000);\n  }\n  clearCountdown() {\n    if (this.countdownTimer) {\n      clearInterval(this.countdownTimer);\n      this.countdownTimer = undefined;\n    }\n    this.countdown = 0;\n  }\n  goToSignup() {\n    this.router.navigate(['/signup']);\n  }\n  ngOnDestroy() {\n    this.clearCountdown();\n  }\n  static {\n    this.ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 20,\n      vars: 2,\n      consts: [[1, \"min-h-screen\", \"bg-gray-50\", \"flex\", \"flex-col\", \"justify-center\", \"py-12\", \"sm:px-6\", \"lg:px-8\"], [1, \"sm:mx-auto\", \"sm:w-full\", \"sm:max-w-md\"], [1, \"mt-6\", \"text-center\", \"text-3xl\", \"font-extrabold\", \"text-gray-900\"], [1, \"mt-2\", \"text-center\", \"text-sm\", \"text-gray-600\"], [1, \"mt-8\", \"sm:mx-auto\", \"sm:w-full\", \"sm:max-w-md\"], [1, \"bg-white\", \"py-8\", \"px-4\", \"shadow\", \"sm:rounded-lg\", \"sm:px-10\"], [\"class\", \"space-y-6\", 3, \"ngSubmit\", 4, \"ngIf\"], [1, \"mt-6\"], [1, \"relative\"], [1, \"absolute\", \"inset-0\", \"flex\", \"items-center\"], [1, \"w-full\", \"border-t\", \"border-gray-300\"], [1, \"relative\", \"flex\", \"justify-center\", \"text-sm\"], [1, \"px-2\", \"bg-white\", \"text-gray-500\"], [1, \"w-full\", \"flex\", \"justify-center\", \"py-2\", \"px-4\", \"border\", \"border-gray-300\", \"rounded-md\", \"shadow-sm\", \"text-sm\", \"font-medium\", \"text-gray-700\", \"bg-white\", \"hover:bg-gray-50\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-offset-2\", \"focus:ring-blue-500\", 3, \"click\"], [1, \"space-y-6\", 3, \"ngSubmit\"], [\"for\", \"email\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\"], [1, \"mt-1\"], [\"id\", \"email\", \"name\", \"email\", \"type\", \"email\", \"required\", \"\", \"placeholder\", \"Enter your email address\", 1, \"appearance-none\", \"block\", \"w-full\", \"px-3\", \"py-2\", \"border\", \"border-gray-300\", \"rounded-md\", \"placeholder-gray-400\", \"focus:outline-none\", \"focus:ring-blue-500\", \"focus:border-blue-500\", 3, \"ngModelChange\", \"ngModel\"], [\"class\", \"text-red-600 text-sm\", 4, \"ngIf\"], [\"class\", \"text-green-600 text-sm\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"w-full\", \"flex\", \"justify-center\", \"py-2\", \"px-4\", \"border\", \"border-transparent\", \"rounded-md\", \"shadow-sm\", \"text-sm\", \"font-medium\", \"text-white\", \"bg-blue-600\", \"hover:bg-blue-700\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-offset-2\", \"focus:ring-blue-500\", \"disabled:opacity-50\", 3, \"disabled\"], [4, \"ngIf\"], [\"class\", \"flex items-center\", 4, \"ngIf\"], [1, \"text-red-600\", \"text-sm\"], [1, \"text-green-600\", \"text-sm\"], [1, \"flex\", \"items-center\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", 1, \"animate-spin\", \"-ml-1\", \"mr-3\", \"h-5\", \"w-5\", \"text-white\"], [\"cx\", \"12\", \"cy\", \"12\", \"r\", \"10\", \"stroke\", \"currentColor\", \"stroke-width\", \"4\", 1, \"opacity-25\"], [\"fill\", \"currentColor\", \"d\", \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\", 1, \"opacity-75\"], [1, \"text-lg\", \"font-medium\", \"text-gray-900\"], [1, \"mt-2\", \"text-sm\", \"text-gray-600\"], [\"for\", \"loginCode\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\"], [\"id\", \"loginCode\", \"name\", \"loginCode\", \"type\", \"text\", \"maxlength\", \"6\", \"required\", \"\", \"placeholder\", \"000000\", 1, \"appearance-none\", \"block\", \"w-full\", \"px-3\", \"py-2\", \"border\", \"border-gray-300\", \"rounded-md\", \"placeholder-gray-400\", \"focus:outline-none\", \"focus:ring-blue-500\", \"focus:border-blue-500\", \"text-center\", \"text-2xl\", \"tracking-widest\", 3, \"ngModelChange\", \"ngModel\"], [1, \"space-y-3\"], [\"type\", \"button\", 1, \"w-full\", \"flex\", \"justify-center\", \"py-2\", \"px-4\", \"border\", \"border-gray-300\", \"rounded-md\", \"shadow-sm\", \"text-sm\", \"font-medium\", \"text-gray-700\", \"bg-white\", \"hover:bg-gray-50\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-offset-2\", \"focus:ring-blue-500\", \"disabled:opacity-50\", 3, \"click\", \"disabled\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n          i0.ɵɵtext(3, \" Sign in to your account \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"p\", 3);\n          i0.ɵɵtext(5, \" Use email verification to access your account \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"div\", 4)(7, \"div\", 5);\n          i0.ɵɵtemplate(8, LoginComponent_form_8_Template, 12, 6, \"form\", 6)(9, LoginComponent_form_9_Template, 20, 10, \"form\", 6);\n          i0.ɵɵelementStart(10, \"div\", 7)(11, \"div\", 8)(12, \"div\", 9);\n          i0.ɵɵelement(13, \"div\", 10);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"div\", 11)(15, \"span\", 12);\n          i0.ɵɵtext(16, \"Don't have an account?\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(17, \"div\", 7)(18, \"button\", 13);\n          i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_18_listener() {\n            return ctx.goToSignup();\n          });\n          i0.ɵɵtext(19, \" Create Account \");\n          i0.ɵɵelementEnd()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngIf\", ctx.currentStep === \"email\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.currentStep === \"code\");\n        }\n      },\n      dependencies: [CommonModule, i3.NgIf, FormsModule, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.MaxLengthValidator, i4.NgModel, i4.NgForm],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["CommonModule","FormsModule","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r1","errorMessage","successMessage","ɵɵelement","ɵɵlistener","LoginComponent_form_8_Template_form_ngSubmit_0_listener","ɵɵrestoreView","_r1","ɵɵnextContext","ɵɵresetView","onRequestLoginCode","ɵɵtwoWayListener","LoginComponent_form_8_Template_input_ngModelChange_5_listener","$event","ɵɵtwoWayBindingSet","loginForm","email","ɵɵtemplate","LoginComponent_form_8_div_6_Template","LoginComponent_form_8_div_7_Template","LoginComponent_form_8_span_10_Template","LoginComponent_form_8_span_11_Template","ɵɵtwoWayProperty","ɵɵproperty","isLoading","countdown","LoginComponent_form_9_Template_form_ngSubmit_0_listener","_r3","onLogin","LoginComponent_form_9_Template_input_ngModelChange_10_listener","loginCode","LoginComponent_form_9_div_11_Template","LoginComponent_form_9_div_12_Template","LoginComponent_form_9_span_15_Template","LoginComponent_form_9_span_16_Template","LoginComponent_form_9_Template_button_click_17_listener","LoginComponent_form_9_span_18_Template","LoginComponent_form_9_span_19_Template","length","LoginComponent","constructor","apiService","router","currentStep","requestLoginCode","subscribe","next","response","success","startCountdown","error","getErrorMessage","loginWithCode","setCurrentUser","data","user","setAuthToken","session_token","clearCountdown","navigate","countdownTimer","setInterval","clearInterval","undefined","goToSignup","ngOnDestroy","ɵɵdirectiveInject","i1","ApiService","i2","Router","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","LoginComponent_Template","rf","ctx","LoginComponent_form_8_Template","LoginComponent_form_9_Template","LoginComponent_Template_button_click_18_listener","i3","NgIf","i4","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","MaxLengthValidator","NgModel","NgForm","encapsulation"],"sources":["C:\\Users\\THIS PC\\OneDrive\\Desktop\\Funeral donations\\src\\app\\components\\auth\\login.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { ApiService, User } from '../../services/api.service';\n\n@Component({\n  selector: 'app-login',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  template: `\n    <div class=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n      <div class=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        <h2 class=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n          Sign in to your account\n        </h2>\n        <p class=\"mt-2 text-center text-sm text-gray-600\">\n          Use email verification to access your account\n        </p>\n      </div>\n\n      <div class=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\n        <div class=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n          <!-- Step 1: Email Input -->\n          <form *ngIf=\"currentStep === 'email'\" (ngSubmit)=\"onRequestLoginCode()\" class=\"space-y-6\">\n            <div>\n              <label for=\"email\" class=\"block text-sm font-medium text-gray-700\">\n                Email Address *\n              </label>\n              <div class=\"mt-1\">\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  required\n                  [(ngModel)]=\"loginForm.email\"\n                  class=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"Enter your email address\"\n                />\n              </div>\n            </div>\n\n            <div *ngIf=\"errorMessage\" class=\"text-red-600 text-sm\">\n              {{ errorMessage }}\n            </div>\n\n            <div *ngIf=\"successMessage\" class=\"text-green-600 text-sm\">\n              {{ successMessage }}\n            </div>\n\n            <div>\n              <button\n                type=\"submit\"\n                [disabled]=\"isLoading || !loginForm.email\"\n                class=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\n              >\n                <span *ngIf=\"!isLoading\">Request Login Code</span>\n                <span *ngIf=\"isLoading\" class=\"flex items-center\">\n                  <svg class=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                    <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                  </svg>\n                  Sending...\n                </span>\n              </button>\n            </div>\n          </form>\n\n          <!-- Step 2: Login Code Verification -->\n          <form *ngIf=\"currentStep === 'code'\" (ngSubmit)=\"onLogin()\" class=\"space-y-6\">\n            <div>\n              <h3 class=\"text-lg font-medium text-gray-900\">Enter Login Code</h3>\n              <p class=\"mt-2 text-sm text-gray-600\">\n                We've sent a 6-digit login code to {{ loginForm.email }}\n              </p>\n            </div>\n\n            <div>\n              <label for=\"loginCode\" class=\"block text-sm font-medium text-gray-700\">\n                Login Code *\n              </label>\n              <div class=\"mt-1\">\n                <input\n                  id=\"loginCode\"\n                  name=\"loginCode\"\n                  type=\"text\"\n                  maxlength=\"6\"\n                  required\n                  [(ngModel)]=\"loginCode\"\n                  class=\"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-center text-2xl tracking-widest\"\n                  placeholder=\"000000\"\n                />\n              </div>\n            </div>\n\n            <div *ngIf=\"errorMessage\" class=\"text-red-600 text-sm\">\n              {{ errorMessage }}\n            </div>\n\n            <div *ngIf=\"successMessage\" class=\"text-green-600 text-sm\">\n              {{ successMessage }}\n            </div>\n\n            <div class=\"space-y-3\">\n              <button\n                type=\"submit\"\n                [disabled]=\"isLoading || loginCode.length !== 6\"\n                class=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\n              >\n                <span *ngIf=\"!isLoading\">Sign In</span>\n                <span *ngIf=\"isLoading\" class=\"flex items-center\">\n                  <svg class=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                    <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                  </svg>\n                  Signing in...\n                </span>\n              </button>\n\n              <button\n                type=\"button\"\n                (click)=\"onRequestLoginCode()\"\n                [disabled]=\"isLoading || countdown > 0\"\n                class=\"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\n              >\n                <span *ngIf=\"countdown > 0\">Send new code in {{ countdown }}s</span>\n                <span *ngIf=\"countdown === 0\">Send New Code</span>\n              </button>\n            </div>\n          </form>\n\n          <!-- Navigation Links -->\n          <div class=\"mt-6\">\n            <div class=\"relative\">\n              <div class=\"absolute inset-0 flex items-center\">\n                <div class=\"w-full border-t border-gray-300\"></div>\n              </div>\n              <div class=\"relative flex justify-center text-sm\">\n                <span class=\"px-2 bg-white text-gray-500\">Don't have an account?</span>\n              </div>\n            </div>\n\n            <div class=\"mt-6\">\n              <button\n                (click)=\"goToSignup()\"\n                class=\"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              >\n                Create Account\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `\n})\nexport class LoginComponent {\n  currentStep: 'email' | 'code' = 'email';\n  \n  loginForm = {\n    email: ''\n  };\n  \n  loginCode = '';\n  isLoading = false;\n  errorMessage = '';\n  successMessage = '';\n  \n  countdown = 0;\n  private countdownTimer?: any;\n\n  constructor(\n    private apiService: ApiService,\n    private router: Router\n  ) {}\n\n  onRequestLoginCode(): void {\n    this.errorMessage = '';\n    this.successMessage = '';\n    this.isLoading = true;\n\n    if (!this.loginForm.email) {\n      this.errorMessage = 'Please enter your email address';\n      this.isLoading = false;\n      return;\n    }\n\n    this.apiService.requestLoginCode(this.loginForm.email).subscribe({\n      next: (response) => {\n        this.isLoading = false;\n        if (response.success) {\n          this.successMessage = 'Login code sent to your email';\n          this.currentStep = 'code';\n          this.startCountdown();\n        } else {\n          this.errorMessage = response.error || 'Failed to send login code';\n        }\n      },\n      error: (error) => {\n        this.isLoading = false;\n        this.errorMessage = this.apiService.getErrorMessage(error);\n      }\n    });\n  }\n\n  onLogin(): void {\n    if (this.loginCode.length !== 6) {\n      this.errorMessage = 'Please enter a 6-digit login code';\n      return;\n    }\n\n    this.errorMessage = '';\n    this.successMessage = '';\n    this.isLoading = true;\n\n    this.apiService.loginWithCode(this.loginForm.email, this.loginCode).subscribe({\n      next: (response) => {\n        this.isLoading = false;\n        if (response.success) {\n          // Set user and token\n          this.apiService.setCurrentUser(response.data.user);\n          this.apiService.setAuthToken(response.data.session_token);\n          \n          // Clear countdown\n          this.clearCountdown();\n          \n          // Navigate to dashboard or announcements\n          this.router.navigate(['/announcements']);\n        } else {\n          this.errorMessage = response.error || 'Login failed';\n        }\n      },\n      error: (error) => {\n        this.isLoading = false;\n        this.errorMessage = this.apiService.getErrorMessage(error);\n      }\n    });\n  }\n\n  private startCountdown(): void {\n    this.countdown = 60;\n    this.countdownTimer = setInterval(() => {\n      this.countdown--;\n      if (this.countdown <= 0) {\n        this.clearCountdown();\n      }\n    }, 1000);\n  }\n\n  private clearCountdown(): void {\n    if (this.countdownTimer) {\n      clearInterval(this.countdownTimer);\n      this.countdownTimer = undefined;\n    }\n    this.countdown = 0;\n  }\n\n  goToSignup(): void {\n    this.router.navigate(['/signup']);\n  }\n\n  ngOnDestroy(): void {\n    this.clearCountdown();\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}