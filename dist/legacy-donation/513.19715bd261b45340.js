"use strict";(self.webpackChunklegacy_donation=self.webpackChunklegacy_donation||[]).push([[513],{2513:(y,d,r)=>{r.r(d),r.d(d,{AnnouncementsComponent:()=>$});var a=r(177),m=r(6544),e=r(4438),c=r(3366);const l=(t,o,n)=>({"bg-green-100 text-green-800":t,"bg-yellow-100 text-yellow-800":o,"bg-red-100 text-red-800":n}),u=t=>["/announcements",t],p=t=>["/donate",t];function _(t,o){1&t&&(e.j41(0,"div",9),e.qSk(),e.j41(1,"svg",10),e.nrm(2,"circle",11)(3,"path",12),e.k0s(),e.joV(),e.j41(4,"p",13),e.EFF(5,"Loading announcements..."),e.k0s()())}function g(t,o){if(1&t&&(e.j41(0,"div",14)(1,"div",15),e.EFF(2),e.k0s()()),2&t){const n=e.XpG();e.R7$(2),e.JRh(n.error)}}function f(t,o){if(1&t&&(e.j41(0,"div")(1,"span",36),e.EFF(2,"Passed:"),e.k0s(),e.j41(3,"span",37),e.EFF(4),e.nI1(5,"date"),e.k0s()()),2&t){const n=e.XpG().$implicit;e.R7$(4),e.JRh(e.i5U(5,1,n.deceased_death_date,"longDate"))}}function v(t,o){if(1&t&&(e.j41(0,"div")(1,"span",36),e.EFF(2,"Funeral:"),e.k0s(),e.j41(3,"span",37),e.EFF(4),e.nI1(5,"date"),e.k0s()()),2&t){const n=e.XpG().$implicit;e.R7$(4),e.JRh(e.i5U(5,1,n.funeral_date,"mediumDate"))}}function h(t,o){if(1&t&&(e.j41(0,"div")(1,"span",36),e.EFF(2,"Location:"),e.k0s(),e.j41(3,"span",37),e.EFF(4),e.k0s()()),2&t){const n=e.XpG().$implicit;e.R7$(4),e.JRh(n.funeral_location)}}function x(t,o){if(1&t&&(e.j41(0,"div")(1,"span",30),e.EFF(2,"Goal:"),e.k0s(),e.j41(3,"span",38),e.EFF(4),e.nI1(5,"number"),e.k0s()()),2&t){const n=e.XpG().$implicit;e.R7$(4),e.SpI("$",e.i5U(5,1,n.goal_amount,"1.2-2"),"")}}function F(t,o){if(1&t&&(e.j41(0,"div")(1,"span",30),e.EFF(2,"Progress:"),e.k0s(),e.j41(3,"span",38),e.EFF(4),e.nI1(5,"number"),e.k0s()()),2&t){const n=e.XpG().$implicit,i=e.XpG(2);e.R7$(4),e.SpI("",e.i5U(5,1,i.getProgressPercentage(n),"1.0-0"),"%")}}function b(t,o){if(1&t&&(e.j41(0,"a",39),e.EFF(1," Donate "),e.k0s()),2&t){const n=e.XpG().$implicit;e.Y8G("routerLink",e.eq3(1,p,n.id))}}function k(t,o){if(1&t&&(e.j41(0,"div",40),e.nrm(1,"img",41),e.k0s()),2&t){const n=e.XpG().$implicit,i=e.XpG(2);e.R7$(),e.Y8G("src",i.getThumbnailImage(n),e.B4B)("alt",n.deceased_name)}}function E(t,o){if(1&t&&(e.j41(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h2",23),e.EFF(6),e.k0s(),e.j41(7,"span",24),e.EFF(8),e.nI1(9,"titlecase"),e.k0s()(),e.j41(10,"p",25),e.EFF(11),e.k0s(),e.j41(12,"div",26),e.DNE(13,f,6,4,"div",27)(14,v,6,4,"div",27)(15,h,5,1,"div",27),e.k0s(),e.j41(16,"div",28)(17,"div",29),e.DNE(18,x,6,4,"div",27),e.j41(19,"div")(20,"span",30),e.EFF(21,"Raised:"),e.k0s(),e.j41(22,"span",31),e.EFF(23),e.nI1(24,"number"),e.k0s()(),e.DNE(25,F,6,4,"div",27),e.k0s(),e.j41(26,"div",32)(27,"a",33),e.EFF(28," View Details "),e.k0s(),e.DNE(29,b,2,3,"a",34),e.k0s()()(),e.DNE(30,k,2,2,"div",35),e.k0s()()()),2&t){const n=o.$implicit,i=e.XpG(2);e.R7$(6),e.JRh(n.deceased_name),e.R7$(),e.Y8G("ngClass",e.sMw(18,l,"active"===n.status,"grace_period"===n.status,"closed"===n.status||"expired"===n.status)),e.R7$(),e.SpI(" ",e.bMT(9,13,n.status)," "),e.R7$(3),e.JRh(n.family_message),e.R7$(2),e.Y8G("ngIf",n.deceased_death_date),e.R7$(),e.Y8G("ngIf",n.funeral_date),e.R7$(),e.Y8G("ngIf",n.funeral_location),e.R7$(3),e.Y8G("ngIf",n.goal_amount),e.R7$(5),e.SpI("$",e.i5U(24,15,n.total_raised||0,"1.2-2"),""),e.R7$(2),e.Y8G("ngIf",n.goal_amount&&n.goal_amount>0),e.R7$(2),e.Y8G("routerLink",e.eq3(22,u,n.id)),e.R7$(2),e.Y8G("ngIf","active"===n.status||"grace_period"===n.status),e.R7$(),e.Y8G("ngIf",i.getThumbnailImage(n))}}function j(t,o){if(1&t&&(e.j41(0,"div",16),e.DNE(1,E,31,24,"div",17),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngForOf",n.announcements)}}function I(t,o){1&t&&(e.j41(0,"div",9),e.qSk(),e.j41(1,"svg",42),e.nrm(2,"path",43),e.k0s(),e.joV(),e.j41(3,"h3",44),e.EFF(4,"No announcements available"),e.k0s(),e.j41(5,"p",45),e.EFF(6,"Be the first to create a funeral announcement."),e.k0s(),e.j41(7,"div",46)(8,"a",47),e.EFF(9," Create Announcement "),e.k0s()()())}function R(t,o){1&t&&(e.j41(0,"div",48)(1,"a",47),e.EFF(2," Create New Announcement "),e.k0s()())}let $=(()=>{class t{constructor(n){this.apiService=n,this.announcements=[],this.isLoading=!0,this.error=""}ngOnInit(){this.loadAnnouncements()}loadAnnouncements(){this.isLoading=!0,this.error="",this.apiService.getAnnouncements().subscribe({next:n=>{this.isLoading=!1,n.success?this.announcements=n.data:this.error=n.error||"Failed to load announcements"},error:n=>{this.isLoading=!1,this.error=this.apiService.getErrorMessage(n)}})}getProgressPercentage(n){return n.goal_amount&&0!==n.goal_amount?Math.min((n.total_raised||0)/n.goal_amount*100,100):0}getThumbnailImage(n){const i=n.files?.find(s=>"deceased_photo"===s.upload_purpose);return i&&"image"===i.file_type?`https://kilnenterprise.com/Donations/api/${i.file_path}`:null}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(c.G))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-announcements"]],standalone:!0,features:[e.aNF],decls:12,vars:5,consts:[[1,"min-h-screen","bg-gray-50","py-12"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"text-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-gray-600"],["class","text-center py-12",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-md p-4 mb-8",4,"ngIf"],["class","space-y-6",4,"ngIf"],["class","text-center mt-8",4,"ngIf"],[1,"text-center","py-12"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-12","w-12","text-blue-600","mx-auto"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"mt-4","text-gray-600"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4","mb-8"],[1,"text-red-600","text-sm"],[1,"space-y-6"],["class","bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow-md","overflow-hidden","hover:shadow-lg","transition-shadow"],[1,"p-6"],[1,"flex","items-start","justify-between"],[1,"flex-1"],[1,"flex","items-center","mb-2"],[1,"text-xl","font-semibold","text-gray-900"],[1,"ml-3","inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium",3,"ngClass"],[1,"text-gray-600","mb-4","line-clamp-3"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","text-sm"],[4,"ngIf"],[1,"mt-4","flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"text-sm","text-gray-500"],[1,"ml-1","font-medium","text-green-600"],[1,"flex","items-center","space-x-3"],[1,"text-blue-600","hover:text-blue-800","font-medium",3,"routerLink"],["class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",3,"routerLink",4,"ngIf"],["class","ml-6 flex-shrink-0",4,"ngIf"],[1,"font-medium","text-gray-500"],[1,"ml-1","text-gray-900"],[1,"ml-1","font-medium","text-gray-900"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700",3,"routerLink"],[1,"ml-6","flex-shrink-0"],[1,"h-24","w-24","object-cover","rounded-lg","shadow-md",3,"src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-16","w-16","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2m10-4h.01M16 5h.01"],[1,"mt-4","text-lg","font-medium","text-gray-900"],[1,"mt-2","text-gray-500"],[1,"mt-6"],["routerLink","/create-announcement",1,"inline-flex","items-center","px-6","py-3","border","border-transparent","text-base","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700"],[1,"text-center","mt-8"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),e.EFF(4,"Funeral Announcements"),e.k0s(),e.j41(5,"p",4),e.EFF(6,"Support families during their time of need"),e.k0s()(),e.DNE(7,_,6,0,"div",5)(8,g,3,1,"div",6)(9,j,2,1,"div",7)(10,I,10,0,"div",5)(11,R,3,0,"div",8),e.k0s()()),2&i&&(e.R7$(7),e.Y8G("ngIf",s.isLoading),e.R7$(),e.Y8G("ngIf",s.error&&!s.isLoading),e.R7$(),e.Y8G("ngIf",!s.isLoading&&s.announcements.length>0),e.R7$(),e.Y8G("ngIf",!s.isLoading&&0===s.announcements.length),e.R7$(),e.Y8G("ngIf",!s.isLoading&&s.announcements.length>0))},dependencies:[a.MD,a.YU,a.Sq,a.bT,a.QX,a.PV,a.vh,m.iI,m.Wk],encapsulation:2})}}return t})()}}]);