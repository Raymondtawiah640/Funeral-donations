"use strict";(self.webpackChunklegacy_donation=self.webpackChunklegacy_donation||[]).push([[478],{6478:(M,m,s)=>{s.r(m),s.d(m,{AnnouncementDetailComponent:()=>T});var l=s(177),c=s(6544),e=s(4438),u=s(3366);const _=(t,o,n)=>({"bg-green-100 text-green-800":t,"bg-yellow-100 text-yellow-800":o,"bg-red-100 text-red-800":n}),p=t=>["/donate",t];function g(t,o){if(1&t&&(e.j41(0,"div")(1,"label",31),e.EFF(2,"Date of Birth"),e.k0s(),e.j41(3,"p",33),e.EFF(4),e.nI1(5,"date"),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.JRh(e.i5U(5,1,n.announcement.deceased_birth_date,"longDate"))}}function f(t,o){if(1&t&&(e.j41(0,"div")(1,"label",31),e.EFF(2,"Date of Death"),e.k0s(),e.j41(3,"p",33),e.EFF(4),e.nI1(5,"date"),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.JRh(e.i5U(5,1,n.announcement.deceased_death_date,"longDate"))}}function v(t,o){if(1&t&&(e.j41(0,"div")(1,"label",31),e.EFF(2,"Funeral Date & Time"),e.k0s(),e.j41(3,"p",33),e.EFF(4),e.nI1(5,"date"),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.JRh(e.i5U(5,1,n.announcement.funeral_date,"medium"))}}function x(t,o){if(1&t&&(e.j41(0,"div")(1,"label",31),e.EFF(2,"Ceremony Type"),e.k0s(),e.j41(3,"p",33),e.EFF(4),e.nI1(5,"titlecase"),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.JRh(e.bMT(5,1,n.announcement.ceremony_type))}}function h(t,o){if(1&t&&(e.j41(0,"div",37)(1,"label",31),e.EFF(2,"Funeral Location"),e.k0s(),e.j41(3,"p",33),e.EFF(4),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.JRh(n.announcement.funeral_location)}}function b(t,o){1&t&&(e.j41(0,"div",38),e.qSk(),e.j41(1,"svg",39),e.nrm(2,"path",40),e.k0s(),e.joV(),e.j41(3,"p",41),e.EFF(4,"No photos uploaded"),e.k0s()())}function k(t,o){if(1&t){const n=e.RV6();e.j41(0,"div",42)(1,"div",43)(2,"img",44),e.bIt("click",function(a){const r=e.eBV(n).$implicit,d=e.XpG(2);return a.stopPropagation(),e.Njj(d.openImageModal(r))}),e.k0s(),e.nrm(3,"div",45),e.k0s()()}if(2&t){const n=o.$implicit,i=e.XpG(2);e.R7$(2),e.Y8G("src",i.getFileUrl(n),e.B4B)("alt",n.original_name)}}function F(t,o){if(1&t){const n=e.RV6();e.j41(0,"div",43)(1,"img",51),e.bIt("click",function(a){e.eBV(n);const r=e.XpG().$implicit,d=e.XpG(3);return a.stopPropagation(),e.Njj(d.openImageModal(r))}),e.k0s()()}if(2&t){const n=e.XpG().$implicit,i=e.XpG(3);e.R7$(),e.Y8G("src",i.getFileUrl(n),e.B4B)("alt",n.original_name)}}function y(t,o){if(1&t&&(e.j41(0,"div",52),e.qSk(),e.j41(1,"svg",53),e.nrm(2,"path",54),e.k0s(),e.joV(),e.j41(3,"div",55)(4,"p",56),e.EFF(5),e.k0s(),e.j41(6,"p",57),e.EFF(7),e.k0s()(),e.j41(8,"a",58),e.qSk(),e.j41(9,"svg",59),e.nrm(10,"path",60),e.k0s()()()),2&t){const n=e.XpG().$implicit,i=e.XpG(3);e.R7$(5),e.JRh(n.original_name),e.R7$(2),e.SpI("",(n.file_size/1024/1024).toFixed(2)," MB"),e.R7$(),e.Y8G("href",i.getFileUrl(n),e.B4B)}}function j(t,o){if(1&t&&(e.j41(0,"div",42)(1,"div",48),e.DNE(2,F,2,2,"div",49)(3,y,11,3,"div",50),e.k0s()()),2&t){const n=o.$implicit;e.R7$(2),e.Y8G("ngIf","image"===n.file_type),e.R7$(),e.Y8G("ngIf","document"===n.file_type)}}function I(t,o){if(1&t&&(e.j41(0,"div",46)(1,"h2",17),e.EFF(2,"Additional Photos & Documents"),e.k0s(),e.j41(3,"div",47),e.DNE(4,j,4,2,"div",28),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.Y8G("ngForOf",n.getFilesByPurpose("other"))}}function w(t,o){if(1&t&&(e.j41(0,"div")(1,"label",31),e.EFF(2,"Goal Amount"),e.k0s(),e.j41(3,"p",32),e.EFF(4),e.nI1(5,"number"),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(4),e.SpI("$",e.i5U(5,1,n.announcement.goal_amount,"1.2-2"),"")}}function E(t,o){if(1&t&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI(" Bank Account: ****",null==n.announcement.beneficiary_bank_account?null:n.announcement.beneficiary_bank_account.slice(-4)," ")}}function D(t,o){if(1&t&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI(" Mobile Money: ",n.announcement.beneficiary_mobile_money," ")}}function R(t,o){if(1&t&&(e.j41(0,"div",21)(1,"a",61),e.EFF(2," Donate Now "),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("routerLink",e.eq3(1,p,n.announcement.id))}}function G(t,o){1&t&&(e.j41(0,"div",21)(1,"div",62)(2,"p",63),e.EFF(3," This announcement is no longer accepting donations. "),e.k0s()()())}function $(t,o){if(1&t){const n=e.RV6();e.j41(0,"div",64),e.bIt("click",function(){e.eBV(n);const a=e.XpG(2);return e.Njj(a.closeImageModal())}),e.j41(1,"div",65)(2,"div",66),e.nrm(3,"div",67),e.k0s(),e.j41(4,"span",68),e.EFF(5,"\u200b"),e.k0s(),e.j41(6,"div",69),e.bIt("click",function(a){return e.eBV(n),e.Njj(a.stopPropagation())}),e.j41(7,"div",70)(8,"div",71)(9,"div",72),e.nrm(10,"img",73),e.j41(11,"div",74)(12,"h3",75),e.EFF(13),e.k0s(),e.j41(14,"p",76),e.EFF(15),e.k0s()()()()(),e.j41(16,"div",77)(17,"button",78),e.bIt("click",function(){e.eBV(n);const a=e.XpG(2);return e.Njj(a.downloadImage(a.selectedImage))}),e.EFF(18," Download "),e.k0s(),e.j41(19,"button",79),e.bIt("click",function(){e.eBV(n);const a=e.XpG(2);return e.Njj(a.closeImageModal())}),e.EFF(20," Close "),e.k0s()()()()()}if(2&t){const n=e.XpG(2);e.R7$(10),e.Y8G("src",n.getFileUrl(n.selectedImage),e.B4B)("alt",n.selectedImage.original_name),e.R7$(3),e.JRh(n.selectedImage.original_name),e.R7$(2),e.SpI(" ",(n.selectedImage.file_size/1024/1024).toFixed(2)," MB ")}}function C(t,o){if(1&t&&(e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"a",5),e.qSk(),e.j41(4,"svg",6),e.nrm(5,"path",7),e.k0s(),e.EFF(6," Back to Announcements "),e.k0s()(),e.joV(),e.j41(7,"div",8)(8,"div",9)(9,"h1",10),e.EFF(10),e.k0s(),e.j41(11,"p",11),e.EFF(12,"Funeral Announcement"),e.k0s()(),e.j41(13,"div",12)(14,"span",13),e.EFF(15),e.nI1(16,"titlecase"),e.k0s()()(),e.j41(17,"div",14)(18,"div",15)(19,"div",16)(20,"h2",17),e.EFF(21,"Deceased Information"),e.k0s(),e.j41(22,"div",18),e.DNE(23,g,6,4,"div",19)(24,f,6,4,"div",19)(25,v,6,4,"div",19)(26,x,6,3,"div",19)(27,h,5,1,"div",20),e.k0s(),e.j41(28,"div",21)(29,"label",22),e.EFF(30,"Family Message"),e.k0s(),e.j41(31,"div",23)(32,"p",24),e.EFF(33),e.k0s()()()()(),e.j41(34,"div",25)(35,"div",16)(36,"h2",17),e.EFF(37,"Photos & Flyers"),e.k0s(),e.DNE(38,b,5,0,"div",26),e.j41(39,"div",27),e.DNE(40,k,4,2,"div",28),e.k0s()()()(),e.DNE(41,I,5,1,"div",29),e.j41(42,"div",16)(43,"h2",17),e.EFF(44,"Donation Information"),e.k0s(),e.j41(45,"div",30)(46,"div")(47,"label",31),e.EFF(48,"Beneficiary"),e.k0s(),e.j41(49,"p",32),e.EFF(50),e.k0s()(),e.DNE(51,w,6,4,"div",19),e.j41(52,"div")(53,"label",31),e.EFF(54,"Payment Details"),e.k0s(),e.j41(55,"div",33),e.DNE(56,E,2,1,"p",19)(57,D,2,1,"p",19),e.k0s()()(),e.j41(58,"div",34)(59,"div",18)(60,"div")(61,"label",31),e.EFF(62,"Announcement Period"),e.k0s(),e.j41(63,"p",33),e.EFF(64),e.nI1(65,"date"),e.nI1(66,"date"),e.k0s()()()(),e.DNE(67,R,3,3,"div",35)(68,G,4,0,"div",35),e.k0s()(),e.DNE(69,$,21,4,"div",36),e.k0s()),2&t){const n=e.XpG();e.R7$(10),e.JRh(n.announcement.deceased_name),e.R7$(4),e.Y8G("ngClass",e.sMw(29,_,"active"===n.announcement.status,"grace_period"===n.announcement.status,"closed"===n.announcement.status||"expired"===n.announcement.status)),e.R7$(),e.SpI(" ",e.bMT(16,21,n.announcement.status)," "),e.R7$(8),e.Y8G("ngIf",n.announcement.deceased_birth_date),e.R7$(),e.Y8G("ngIf",n.announcement.deceased_death_date),e.R7$(),e.Y8G("ngIf",n.announcement.funeral_date),e.R7$(),e.Y8G("ngIf",n.announcement.ceremony_type),e.R7$(),e.Y8G("ngIf",n.announcement.funeral_location),e.R7$(6),e.JRh(n.announcement.family_message),e.R7$(5),e.Y8G("ngIf",0===n.getFilesByPurpose("deceased_photo").length),e.R7$(2),e.Y8G("ngForOf",n.getFilesByPurpose("deceased_photo")),e.R7$(),e.Y8G("ngIf",n.getFilesByPurpose("other").length>0),e.R7$(9),e.JRh(n.announcement.beneficiary_name),e.R7$(),e.Y8G("ngIf",n.announcement.goal_amount),e.R7$(5),e.Y8G("ngIf","bank"===n.announcement.beneficiary_account_type),e.R7$(),e.Y8G("ngIf","mobile_money"===n.announcement.beneficiary_account_type),e.R7$(7),e.Lme(" ",e.i5U(65,23,n.announcement.announcement_start_date,"longDate")," - ",e.i5U(66,26,n.announcement.announcement_end_date,"longDate")," "),e.R7$(3),e.Y8G("ngIf","active"===n.announcement.status||"grace_period"===n.announcement.status),e.R7$(),e.Y8G("ngIf","closed"===n.announcement.status||"expired"===n.announcement.status),e.R7$(),e.Y8G("ngIf",n.selectedImage)}}function A(t,o){1&t&&(e.j41(0,"div",80)(1,"div",81),e.qSk(),e.j41(2,"svg",82),e.nrm(3,"circle",83)(4,"path",84),e.k0s(),e.joV(),e.j41(5,"p",85),e.EFF(6,"Loading announcement..."),e.k0s()()())}function B(t,o){if(1&t&&(e.j41(0,"div",80)(1,"div",81),e.qSk(),e.j41(2,"svg",86),e.nrm(3,"path",87),e.k0s(),e.joV(),e.j41(4,"h3",88),e.EFF(5,"Error loading announcement"),e.k0s(),e.j41(6,"p",76),e.EFF(7),e.k0s(),e.j41(8,"div",21)(9,"a",89),e.EFF(10,"Back to announcements"),e.k0s()()()()),2&t){const n=e.XpG();e.R7$(7),e.JRh(n.error)}}let T=(()=>{class t{constructor(n,i){this.route=n,this.apiService=i,this.announcement=null,this.isLoading=!0,this.error="",this.selectedImage=null}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");n&&this.loadAnnouncement(parseInt(n))}loadAnnouncement(n){this.isLoading=!0,this.error="",this.apiService.getAnnouncement(n).subscribe({next:i=>{this.isLoading=!1,i.success?this.announcement=i.data:this.error=i.error||"Failed to load announcement"},error:i=>{this.isLoading=!1,this.error=this.apiService.getErrorMessage(i)}})}getFilesByPurpose(n){return this.announcement?.files?.filter(i=>i.upload_purpose===n)||[]}getFileUrl(n){return`https://kilnenterprise.com/Donations/files.php?file_id=${n.id}`}openImageModal(n){this.selectedImage=n}closeImageModal(){this.selectedImage=null}downloadImage(n){const i=document.createElement("a");i.href=this.getFileUrl(n),i.download=n.original_name,i.target="_blank",document.body.appendChild(i),i.click(),document.body.removeChild(i)}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(c.nX),e.rXU(u.G))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-announcement-detail"]],standalone:!0,features:[e.aNF],decls:3,vars:3,consts:[["class","min-h-screen bg-gray-50 py-12",4,"ngIf"],["class","min-h-screen bg-gray-50 flex items-center justify-center",4,"ngIf"],[1,"min-h-screen","bg-gray-50","py-12"],[1,"max-w-4xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"mb-6"],["routerLink","/announcements",1,"inline-flex","items-center","text-blue-600","hover:text-blue-800"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"bg-white","shadow","rounded-lg","overflow-hidden","mb-8"],[1,"bg-gradient-to-r","from-blue-600","to-blue-800","px-6","py-8"],[1,"text-3xl","font-bold","text-white"],[1,"mt-2","text-blue-100"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium",3,"ngClass"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8","mb-8"],[1,"lg:col-span-2"],[1,"bg-white","shadow","rounded-lg","p-6"],[1,"text-xl","font-semibold","text-gray-900","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[4,"ngIf"],["class","md:col-span-2",4,"ngIf"],[1,"mt-6"],[1,"block","text-sm","font-medium","text-gray-500","mb-2"],[1,"bg-gray-50","rounded-lg","p-4"],[1,"text-gray-900","whitespace-pre-wrap"],[1,"lg:col-span-1"],["class","text-center py-8",4,"ngIf"],[1,"space-y-4"],["class","group",4,"ngFor","ngForOf"],["class","bg-white shadow rounded-lg p-6 mb-8",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"block","text-sm","font-medium","text-gray-500"],[1,"mt-1","text-lg","text-gray-900"],[1,"mt-1","text-sm","text-gray-900"],[1,"mt-6","pt-6","border-t","border-gray-200"],["class","mt-6",4,"ngIf"],["class","fixed inset-0 z-50 overflow-y-auto",3,"click",4,"ngIf"],[1,"md:col-span-2"],[1,"text-center","py-8"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"mt-2","text-sm","text-gray-500"],[1,"group"],[1,"relative"],[1,"w-full","h-48","object-contain","rounded-lg","shadow-md","group-hover:shadow-lg","transition-shadow","cursor-pointer",3,"click","src","alt"],[1,"absolute","inset-0","bg-black","bg-opacity-0","group-hover:bg-opacity-20","transition-all","rounded-lg"],[1,"bg-white","shadow","rounded-lg","p-6","mb-8"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"border","border-gray-200","rounded-lg","overflow-hidden","hover:shadow-md","transition-shadow"],["class","relative",4,"ngIf"],["class","p-4 flex items-center",4,"ngIf"],[1,"w-full","h-40","object-contain","cursor-pointer",3,"click","src","alt"],[1,"p-4","flex","items-center"],["fill","currentColor","viewBox","0 0 20 20",1,"h-8","w-8","text-red-500","mr-3"],["fill-rule","evenodd","d","M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 110 2h-3a1 1 0 01-1-1v-2a1 1 0 00-1-1H9a1 1 0 00-1 1v2a1 1 0 01-1 1H4a1 1 0 110-2V4zm3 1h2v2H7V5zm2 4H7v2h2V9zm2-4h2v2h-2V5zm2 4h-2v2h2V9z","clip-rule","evenodd"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","text-gray-900","truncate"],[1,"text-xs","text-gray-500"],["download","","title","Download file",1,"ml-3","text-blue-600","hover:text-blue-800",3,"href"],["fill","currentColor","viewBox","0 0 20 20",1,"h-5","w-5"],["fill-rule","evenodd","d","M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule","evenodd"],[1,"inline-flex","items-center","px-6","py-3","border","border-transparent","text-base","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700",3,"routerLink"],[1,"bg-gray-100","border","border-gray-200","rounded-md","p-4"],[1,"text-gray-600","text-sm"],[1,"fixed","inset-0","z-50","overflow-y-auto",3,"click"],[1,"flex","items-center","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity"],[1,"absolute","inset-0","bg-gray-500","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-4xl","sm:w-full",3,"click"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mt-3","text-center","sm:mt-0","sm:text-left","w-full"],[1,"w-full","h-auto","max-h-96","object-contain",3,"src","alt"],[1,"mt-4"],[1,"text-lg","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"bg-gray-50","px-4","py-3","sm:px-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-transparent","shadow-sm","px-4","py-2","bg-blue-600","text-base","font-medium","text-white","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","sm:ml-3","sm:w-auto","sm:text-sm",3,"click"],["type","button",1,"mt-3","w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","sm:mt-0","sm:ml-3","sm:w-auto","sm:text-sm",3,"click"],[1,"min-h-screen","bg-gray-50","flex","items-center","justify-center"],[1,"text-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-12","w-12","text-blue-600","mx-auto"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"mt-4","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"mt-2","text-sm","font-medium","text-gray-900"],["routerLink","/announcements",1,"text-blue-600","hover:text-blue-500"]],template:function(i,a){1&i&&e.DNE(0,C,70,33,"div",0)(1,A,7,0,"div",1)(2,B,11,1,"div",1),2&i&&(e.Y8G("ngIf",a.announcement),e.R7$(),e.Y8G("ngIf",a.isLoading),e.R7$(),e.Y8G("ngIf",a.error&&!a.isLoading))},dependencies:[l.MD,l.YU,l.Sq,l.bT,l.QX,l.PV,l.vh,c.iI,c.Wk],encapsulation:2})}}return t})()}}]);