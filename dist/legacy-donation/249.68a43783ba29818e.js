"use strict";(self.webpackChunklegacy_donation=self.webpackChunklegacy_donation||[]).push([[249],{3249:(E,c,s)=>{s.r(c),s.d(c,{DonateComponent:()=>F});var r=s(177),d=s(4341),e=s(4438),m=s(3366),l=s(6544);function u(t,a){1&t&&(e.j41(0,"div",5),e.qSk(),e.j41(1,"svg",6),e.nrm(2,"circle",7)(3,"path",8),e.k0s(),e.joV(),e.j41(4,"p",9),e.EFF(5,"Loading announcement details..."),e.k0s()())}function _(t,a){if(1&t&&e.nrm(0,"img",18),2&t){const n=e.XpG(2);e.Y8G("src",n.getThumbnailImage(n.announcement),e.B4B)("alt",n.announcement.deceased_name)}}function p(t,a){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI("Goal: ",n.formatCurrency(n.announcement.goal_amount),"")}}function g(t,a){if(1&t&&(e.j41(0,"div",10)(1,"div",11)(2,"div",12),e.DNE(3,_,1,2,"img",13),e.k0s(),e.j41(4,"div",14)(5,"h2",15),e.EFF(6),e.k0s(),e.j41(7,"p",16),e.EFF(8),e.k0s(),e.j41(9,"div",17),e.DNE(10,p,2,1,"span",4),e.k0s()()()()),2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngIf",n.getThumbnailImage(n.announcement)),e.R7$(3),e.JRh(n.announcement.deceased_name),e.R7$(2),e.JRh(n.getMessagePreview()),e.R7$(2),e.Y8G("ngIf",n.announcement.goal_amount)}}function f(t,a){if(1&t&&(e.j41(0,"span",45),e.EFF(1),e.k0s()),2&t){const n=e.XpG(4);e.R7$(),e.JRh(n.copiedMessage)}}function h(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",38)(1,"label",30),e.EFF(2,"Bank Account Number"),e.k0s(),e.j41(3,"div",39)(4,"p",40),e.EFF(5),e.k0s(),e.j41(6,"button",41),e.bIt("click",function(){e.eBV(n);const i=e.XpG(3);return e.Njj(i.copyToClipboard(i.announcement.beneficiary_bank_account||""))}),e.qSk(),e.j41(7,"svg",42),e.nrm(8,"path",43),e.k0s()(),e.DNE(9,f,2,1,"span",44),e.k0s()()}if(2&t){const n=e.XpG(3);e.R7$(5),e.JRh(n.announcement.beneficiary_bank_account),e.R7$(4),e.Y8G("ngIf",n.copiedMessage)}}function v(t,a){if(1&t&&(e.j41(0,"span",45),e.EFF(1),e.k0s()),2&t){const n=e.XpG(4);e.R7$(),e.JRh(n.copiedMessage)}}function x(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",38)(1,"label",30),e.EFF(2,"Mobile Money Number"),e.k0s(),e.j41(3,"div",39)(4,"p",40),e.EFF(5),e.k0s(),e.j41(6,"button",41),e.bIt("click",function(){e.eBV(n);const i=e.XpG(3);return e.Njj(i.copyToClipboard(i.announcement.beneficiary_mobile_money||""))}),e.qSk(),e.j41(7,"svg",42),e.nrm(8,"path",43),e.k0s()(),e.DNE(9,v,2,1,"span",44),e.k0s()()}if(2&t){const n=e.XpG(3);e.R7$(5),e.JRh(n.announcement.beneficiary_mobile_money),e.R7$(4),e.Y8G("ngIf",n.copiedMessage)}}function b(t,a){1&t&&(e.j41(0,"div",46)(1,"div",47),e.qSk(),e.j41(2,"svg",48),e.nrm(3,"path",49),e.k0s(),e.joV(),e.j41(4,"h3",50),e.EFF(5,"Donations Closed"),e.k0s(),e.j41(6,"p",51),e.EFF(7," This announcement is no longer accepting donations. The fundraising period has ended. "),e.k0s()()())}function k(t,a){if(1&t&&(e.j41(0,"div",24)(1,"h3",25),e.EFF(2,"How to Donate"),e.k0s(),e.j41(3,"p",26),e.EFF(4," Please send your donation directly to the beneficiary's account using the details below. "),e.k0s(),e.j41(5,"div",27)(6,"h4",28),e.EFF(7,"Payment Details"),e.k0s(),e.j41(8,"div",29)(9,"div")(10,"label",30),e.EFF(11,"Beneficiary"),e.k0s(),e.j41(12,"p",31),e.EFF(13),e.k0s()(),e.j41(14,"div")(15,"label",30),e.EFF(16,"Account Type"),e.k0s(),e.j41(17,"p",32),e.EFF(18),e.k0s()(),e.DNE(19,h,10,2,"div",33)(20,x,10,2,"div",33),e.k0s()(),e.DNE(21,b,8,0,"div",34),e.j41(22,"div",35)(23,"h4",36),e.EFF(24,"Thank You"),e.k0s(),e.j41(25,"p",37),e.EFF(26," After making your donation, the family will be notified and the donation amount will be updated on this page. Please keep your transaction receipt for your records. "),e.k0s()()()),2&t){const n=e.XpG(2);e.R7$(13),e.JRh(n.announcement.beneficiary_name),e.R7$(5),e.JRh("bank"===n.announcement.beneficiary_account_type?"Bank Account":"Mobile Money"),e.R7$(),e.Y8G("ngIf","bank"===n.announcement.beneficiary_account_type),e.R7$(),e.Y8G("ngIf","mobile_money"===n.announcement.beneficiary_account_type),e.R7$(),e.Y8G("ngIf",!n.isLoading&&n.announcement&&(n.announcement.is_closed||"closed"===n.announcement.status))}}function y(t,a){if(1&t&&(e.j41(0,"div")(1,"div",19)(2,"h2",20),e.EFF(3," Make a Donation "),e.k0s(),e.j41(4,"p",21),e.EFF(5," Your contribution helps provide support to families during their most difficult times. "),e.k0s()(),e.j41(6,"div",22),e.DNE(7,k,27,5,"div",23),e.k0s()()),2&t){const n=e.XpG();e.R7$(7),e.Y8G("ngIf",n.announcement)}}let F=(()=>{class t{constructor(n,o){this.apiService=n,this.route=o,this.title="Donate - Legacy Donation",this.announcement=null,this.announcementId=null,this.isLoading=!0,this.copiedMessage=""}ngOnInit(){this.announcementId=parseInt(this.route.snapshot.paramMap.get("announcementId")||"0"),this.announcementId>0?this.loadAnnouncement(this.announcementId):(this.isLoading=!1,console.error("Invalid announcement ID"))}loadAnnouncement(n){this.apiService.getAnnouncement(n).subscribe({next:o=>{this.isLoading=!1,o.success?(this.announcement=o.data,"active"!==this.announcement.status&&"grace_period"!==this.announcement.status&&console.error("This announcement is no longer accepting donations.")):console.error(o.error||"Failed to load announcement details")},error:o=>{this.isLoading=!1,console.error(this.apiService.getErrorMessage(o))}})}getThumbnailImage(n){const o=n.files?.find(i=>"deceased_photo"===i.upload_purpose);return o&&"image"===o.file_type?`https://kilnenterprise.com/Donations/${o.file_path}`:null}formatCurrency(n){return`GH\u20b5${("string"==typeof n?parseFloat(n):n||0).toFixed(2)}`}getMessagePreview(){const n=this.announcement?.family_message||"";return n.length>100?n.substring(0,100)+"...":n}copyToClipboard(n){navigator.clipboard&&navigator.clipboard.writeText(n).then(()=>{this.copiedMessage="Copied!",setTimeout(()=>{this.copiedMessage=""},2e3)})}static{this.\u0275fac=function(o){return new(o||t)(e.rXU(m.G),e.rXU(l.nX))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-donate"]],standalone:!0,features:[e.aNF],decls:5,vars:3,consts:[[1,"py-20"],[1,"max-w-3xl","mx-auto","px-4","sm:px-6","lg:px-8"],["class","text-center py-12",4,"ngIf"],["class","mb-8 bg-white rounded-lg shadow-md p-6",4,"ngIf"],[4,"ngIf"],[1,"text-center","py-12"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-12","w-12","text-blue-600","mx-auto"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"mt-4","text-gray-600"],[1,"mb-8","bg-white","rounded-lg","shadow-md","p-6"],[1,"flex","items-center","space-x-4"],[1,"flex-shrink-0"],["class","h-16 w-16 object-cover rounded-lg shadow-md",3,"src","alt",4,"ngIf"],[1,"flex-1"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"mt-2","flex","items-center","space-x-4","text-sm","text-gray-500"],[1,"h-16","w-16","object-cover","rounded-lg","shadow-md",3,"src","alt"],[1,"text-center"],[1,"text-3xl","font-extrabold","text-gray-900","sm:text-4xl"],[1,"mt-4","text-lg","text-gray-500"],[1,"mt-12","bg-white","shadow-lg","rounded-lg","p-8"],["class","mb-8",4,"ngIf"],[1,"mb-8"],[1,"text-lg","font-medium","text-gray-900","mb-6"],[1,"text-gray-600","mb-6"],[1,"bg-gray-50","rounded-lg","p-6","mb-6"],[1,"text-md","font-medium","text-gray-900","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-gray-500"],[1,"mt-1","text-sm","text-gray-900","font-medium"],[1,"mt-1","text-sm","text-gray-900"],["class","md:col-span-2",4,"ngIf"],["class","mt-12 bg-white shadow-lg rounded-lg p-8 text-center",4,"ngIf"],[1,"bg-green-50","border","border-green-200","rounded-lg","p-6"],[1,"text-md","font-medium","text-green-900","mb-2"],[1,"text-sm","text-green-700"],[1,"md:col-span-2"],[1,"flex","items-center","mt-1"],[1,"text-sm","text-gray-900","font-mono","text-lg"],["type","button",1,"ml-3","text-blue-600","hover:text-blue-800",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],["class","ml-2 text-sm text-green-600",4,"ngIf"],[1,"ml-2","text-sm","text-green-600"],[1,"mt-12","bg-white","shadow-lg","rounded-lg","p-8","text-center"],[1,"max-w-md","mx-auto"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-16","w-16","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"mt-4","text-lg","font-medium","text-gray-900"],[1,"mt-2","text-sm","text-gray-500"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,u,6,0,"div",2)(3,g,11,4,"div",3)(4,y,8,1,"div",4),e.k0s()()),2&o&&(e.R7$(2),e.Y8G("ngIf",i.isLoading),e.R7$(),e.Y8G("ngIf",i.announcement&&!i.isLoading),e.R7$(),e.Y8G("ngIf",!i.isLoading&&i.announcement&&!i.announcement.is_closed&&"closed"!==i.announcement.status))},dependencies:[r.MD,r.bT,d.YN],encapsulation:2})}}return t})()}}]);