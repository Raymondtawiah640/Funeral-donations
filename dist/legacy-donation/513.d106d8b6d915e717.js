"use strict";(self.webpackChunklegacy_donation=self.webpackChunklegacy_donation||[]).push([[513],{2513:(A,l,a)=>{a.r(l),a.d(l,{AnnouncementsComponent:()=>I});var r=a(177),c=a(6544),d=a(4341),e=a(4438),u=a(3366);const g=(t,o,n)=>({"bg-green-100 text-green-800":t,"bg-yellow-100 text-yellow-800":o,"bg-red-100 text-red-800":n}),p=t=>["/announcements",t],_=t=>["/donate",t];function f(t,o){1&t&&(e.j41(0,"div",15),e.qSk(),e.j41(1,"svg",16),e.nrm(2,"circle",17)(3,"path",18),e.k0s(),e.joV(),e.j41(4,"p",19),e.EFF(5,"Loading announcements..."),e.k0s()())}function h(t,o){if(1&t&&(e.j41(0,"div",20)(1,"div",21),e.EFF(2),e.k0s()()),2&t){const n=e.XpG();e.R7$(2),e.JRh(n.error)}}function v(t,o){if(1&t&&(e.j41(0,"div")(1,"span",40),e.EFF(2,"Passed:"),e.k0s(),e.j41(3,"span",41),e.EFF(4),e.nI1(5,"date"),e.k0s()()),2&t){const n=e.XpG().$implicit;e.R7$(4),e.JRh(e.i5U(5,1,n.deceased_death_date,"longDate"))}}function x(t,o){if(1&t&&(e.j41(0,"div")(1,"span",40),e.EFF(2,"Funeral:"),e.k0s(),e.j41(3,"span",41),e.EFF(4),e.nI1(5,"date"),e.k0s()()),2&t){const n=e.XpG().$implicit;e.R7$(4),e.JRh(e.i5U(5,1,n.funeral_date,"mediumDate"))}}function k(t,o){if(1&t&&(e.j41(0,"div")(1,"span",40),e.EFF(2,"Location:"),e.k0s(),e.j41(3,"span",41),e.EFF(4),e.k0s()()),2&t){const n=e.XpG().$implicit;e.R7$(4),e.JRh(n.funeral_location)}}function b(t,o){if(1&t&&(e.j41(0,"div")(1,"span",42),e.EFF(2,"Goal:"),e.k0s(),e.j41(3,"span",43),e.EFF(4),e.nI1(5,"number"),e.k0s()()),2&t){const n=e.XpG().$implicit;e.R7$(4),e.SpI("GH\u20b5",e.i5U(5,1,n.goal_amount,"1.2-2"),"")}}function F(t,o){if(1&t&&(e.j41(0,"a",44),e.EFF(1," Donate "),e.k0s()),2&t){const n=e.XpG().$implicit;e.Y8G("routerLink",e.eq3(1,_,n.id))}}function E(t,o){if(1&t&&(e.j41(0,"div",45),e.nrm(1,"img",46),e.k0s()),2&t){const n=e.XpG().$implicit,s=e.XpG(2);e.R7$(),e.Y8G("src",s.getThumbnailImage(n),e.B4B)("alt",n.deceased_name)}}function j(t,o){if(1&t&&(e.j41(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",27)(4,"div",28)(5,"h2",29),e.EFF(6),e.k0s(),e.j41(7,"span",30),e.EFF(8),e.nI1(9,"titlecase"),e.k0s()(),e.j41(10,"p",31),e.EFF(11),e.k0s(),e.j41(12,"div",32),e.DNE(13,v,6,4,"div",33)(14,x,6,4,"div",33)(15,k,5,1,"div",33),e.k0s(),e.j41(16,"div",34)(17,"div",35),e.DNE(18,b,6,4,"div",33),e.k0s(),e.j41(19,"div",36)(20,"a",37),e.EFF(21," View Details "),e.k0s(),e.DNE(22,F,2,3,"a",38),e.k0s()()(),e.DNE(23,E,2,2,"div",39),e.k0s()()()),2&t){const n=o.$implicit,s=e.XpG(2);e.R7$(6),e.JRh(n.deceased_name),e.R7$(),e.Y8G("ngClass",e.sMw(13,g,"active"===n.status,"grace_period"===n.status,"closed"===n.status||"expired"===n.status)),e.R7$(),e.SpI(" ",e.bMT(9,11,n.status)," "),e.R7$(3),e.JRh(n.family_message),e.R7$(2),e.Y8G("ngIf",n.deceased_death_date),e.R7$(),e.Y8G("ngIf",n.funeral_date),e.R7$(),e.Y8G("ngIf",n.funeral_location),e.R7$(3),e.Y8G("ngIf",n.goal_amount),e.R7$(2),e.Y8G("routerLink",e.eq3(17,p,n.id)),e.R7$(2),e.Y8G("ngIf","active"===n.status||"grace_period"===n.status),e.R7$(),e.Y8G("ngIf",s.getThumbnailImage(n))}}function y(t,o){if(1&t&&(e.j41(0,"div",22),e.DNE(1,j,24,19,"div",23),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngForOf",n.filteredAnnouncements)}}function C(t,o){1&t&&(e.j41(0,"div",15),e.qSk(),e.j41(1,"svg",47),e.nrm(2,"path",10),e.k0s(),e.joV(),e.j41(3,"h3",48),e.EFF(4,"No matching announcements"),e.k0s(),e.j41(5,"p",49),e.EFF(6,"Try adjusting your search terms."),e.k0s()())}function w(t,o){1&t&&(e.j41(0,"div",15),e.qSk(),e.j41(1,"svg",47),e.nrm(2,"path",50),e.k0s(),e.joV(),e.j41(3,"h3",48),e.EFF(4,"No announcements available"),e.k0s(),e.j41(5,"p",49),e.EFF(6,"Be the first to create a funeral announcement."),e.k0s(),e.j41(7,"div",51)(8,"a",52),e.EFF(9," Create Announcement "),e.k0s()()())}function R(t,o){1&t&&(e.j41(0,"div",53)(1,"a",52),e.EFF(2," Create New Announcement "),e.k0s()())}let I=(()=>{class t{constructor(n){this.apiService=n,this.announcements=[],this.searchTerm="",this.isLoading=!0,this.error=""}ngOnInit(){this.loadAnnouncements()}get filteredAnnouncements(){return this.searchTerm?this.announcements.filter(n=>n.deceased_name.toLowerCase().includes(this.searchTerm.toLowerCase())):this.announcements}loadAnnouncements(){this.isLoading=!0,this.error="",this.apiService.getAnnouncements().subscribe({next:n=>{this.isLoading=!1,n.success?this.announcements=n.data:this.error=n.error||"Failed to load announcements"},error:n=>{this.isLoading=!1,this.error=this.apiService.getErrorMessage(n)}})}getThumbnailImage(n){const s=n.files?.find(i=>"deceased_photo"===i.upload_purpose);return s&&"image"===s.file_type?`https://kilnenterprise.com/Donations/${s.file_path}`:null}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(u.G))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-announcements"]],standalone:!0,features:[e.aNF],decls:19,vars:7,consts:[[1,"min-h-screen","bg-gray-50","py-12"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"text-center","mb-8"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-gray-600"],[1,"mt-6","max-w-md","mx-auto"],[1,"relative"],["type","text","placeholder","Search by deceased name...",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","text-gray-900","placeholder-gray-500",3,"ngModelChange","ngModel"],[1,"absolute","inset-y-0","right-0","pr-3","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["class","text-center py-12",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-md p-4 mb-8",4,"ngIf"],["class","space-y-6",4,"ngIf"],["class","text-center mt-8",4,"ngIf"],[1,"text-center","py-12"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-12","w-12","text-blue-600","mx-auto"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"mt-4","text-gray-600"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4","mb-8"],[1,"text-red-600","text-sm"],[1,"space-y-6"],["class","bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow-md","overflow-hidden","hover:shadow-lg","transition-shadow"],[1,"p-6"],[1,"flex","flex-col","lg:flex-row","lg:items-start"],[1,"flex-1","lg:mr-6"],[1,"flex","items-center","mb-2"],[1,"text-xl","font-semibold","text-gray-900"],[1,"ml-3","inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium",3,"ngClass"],[1,"text-gray-600","mb-4","line-clamp-3"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","text-sm"],[4,"ngIf"],[1,"mt-4","flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"flex","items-center","space-x-3"],[1,"text-blue-600","hover:text-blue-800","font-medium",3,"routerLink"],["class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",3,"routerLink",4,"ngIf"],["class","mt-4 lg:mt-0 lg:ml-6 flex-shrink-0 mx-auto lg:mx-0",4,"ngIf"],[1,"font-medium","text-gray-500"],[1,"ml-1","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"ml-1","font-medium","text-gray-900"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700",3,"routerLink"],[1,"mt-4","lg:mt-0","lg:ml-6","flex-shrink-0","mx-auto","lg:mx-0"],[1,"h-24","w-24","lg:h-32","lg:w-32","object-contain","rounded-lg","shadow-md",3,"src","alt"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-16","w-16","text-gray-400"],[1,"mt-4","text-lg","font-medium","text-gray-900"],[1,"mt-2","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2m10-4h.01M16 5h.01"],[1,"mt-6"],["routerLink","/create-announcement",1,"inline-flex","items-center","px-6","py-3","border","border-transparent","text-base","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700"],[1,"text-center","mt-8"]],template:function(s,i){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),e.EFF(4,"Funeral Announcements"),e.k0s(),e.j41(5,"p",4),e.EFF(6,"Support families during their time of need"),e.k0s(),e.j41(7,"div",5)(8,"div",6)(9,"input",7),e.mxI("ngModelChange",function(m){return e.DH7(i.searchTerm,m)||(i.searchTerm=m),m}),e.k0s(),e.j41(10,"div",8),e.qSk(),e.j41(11,"svg",9),e.nrm(12,"path",10),e.k0s()()()()(),e.DNE(13,f,6,0,"div",11)(14,h,3,1,"div",12)(15,y,2,1,"div",13)(16,C,7,0,"div",11)(17,w,10,0,"div",11)(18,R,3,0,"div",14),e.k0s()()),2&s&&(e.R7$(9),e.R50("ngModel",i.searchTerm),e.R7$(4),e.Y8G("ngIf",i.isLoading),e.R7$(),e.Y8G("ngIf",i.error&&!i.isLoading),e.R7$(),e.Y8G("ngIf",!i.isLoading&&i.filteredAnnouncements.length>0),e.R7$(),e.Y8G("ngIf",!i.isLoading&&0===i.filteredAnnouncements.length&&i.announcements.length>0),e.R7$(),e.Y8G("ngIf",!i.isLoading&&0===i.announcements.length),e.R7$(),e.Y8G("ngIf",!i.isLoading&&i.filteredAnnouncements.length>0))},dependencies:[r.MD,r.YU,r.Sq,r.bT,r.QX,r.PV,r.vh,c.iI,c.Wk,d.YN,d.me,d.BC,d.vS],encapsulation:2})}}return t})()}}]);